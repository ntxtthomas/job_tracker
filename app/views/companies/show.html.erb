<p style="color: green"><%= notice %></p>

<%= render "company_details", company: @company %>

<div style="margin-top: 2rem; display: flex; gap: 0.5rem; align-items: center;">
  <%= link_to "Edit this company", edit_company_path(@company), style: "background-color: #0d6efd; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; transition: all 0.2s ease; text-decoration: none; display: inline-block;", onmouseover: "this.style.backgroundColor='#0b5ed7'", onmouseout: "this.style.backgroundColor='#0d6efd'", onmousedown: "this.style.transform='scale(0.95)'", onmouseup: "this.style.transform='scale(1)'" %>
  <%= link_to "Back to companies", companies_path, style: "background-color: #6c757d; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; transition: all 0.2s ease; text-decoration: none; display: inline-block;", onmouseover: "this.style.backgroundColor='#5a6268'", onmouseout: "this.style.backgroundColor='#6c757d'", onmousedown: "this.style.transform='scale(0.95)'", onmouseup: "this.style.transform='scale(1)'" %>
  <%= button_to "Destroy this company", @company, method: :delete, style: "margin: 0; background-color: #dc3545; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; transition: all 0.2s ease;", data: { confirm: "Are you sure?" }, onmouseover: "this.style.backgroundColor='#c82333'", onmouseout: "this.style.backgroundColor='#dc3545'", onmousedown: "this.style.transform='scale(0.95)'", onmouseup: "this.style.transform='scale(1)'" %>
</div>
<div style="margin-top: 2rem; display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
  <!-- Opportunities Column -->
  <div style="display: flex; flex-direction: column;">
    <h3 style="margin: 0 0 1rem 0;">Opportunities (<%= @company.opportunities.count %>)</h3>
    <% if @company.opportunities.any? %>
      <div style="display: flex; flex-direction: column; gap: 10px;">
        <% @company.opportunities.each do |opportunity| %>
          <div style="padding: 12px; border: 1px solid #ddd; border-radius: 4px; background-color: var(--bg-secondary, #f8f9fa); cursor: pointer; transition: all 0.2s ease; min-height: 100px; display: flex; flex-direction: column; justify-content: center;" onmouseover="this.style.backgroundColor='#e9ecef'" onmouseout="this.style.backgroundColor='var(--bg-secondary, #f8f9fa)'" onclick="window.location.href='<%= opportunity_path(opportunity) %>'">
            <div style="display: flex; justify-content: space-between; align-items: start;">
              <div style="flex: 1;">
                <h4 style="margin: 0 0 5px 0;"><%= link_to opportunity.position_title, opportunity_path(opportunity), style: "color: #0d6efd; text-decoration: none;" %></h4>
                <p style="margin: 5px 0; font-size: 14px; color: #666;">
                  <strong>Status:</strong> <%= opportunity.status %>
                </p>
                <p style="margin: 5px 0; font-size: 14px; color: #666;">
                  <strong>Applied:</strong> <%= opportunity.application_date&.strftime("%b %d, %Y") %>
                </p>
                <% if opportunity.salary_range.present? %>
                <p style="margin: 5px 0; font-size: 14px; color: #666;">
                  <strong>Salary:</strong> <%= opportunity.salary_range %>
                </p>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div style="padding: 12px; border: 1px solid #ddd; border-radius: 4px; background-color: var(--bg-secondary, #f8f9fa); text-align: center; color: #666; min-height: 100px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <p>No opportunities found</p>
        <%= link_to "Add opportunity", new_opportunity_path(company_id: @company.id), style: "color: #0d6efd; text-decoration: none;" %>
      </div>
    <% end %>
  </div>

  <!-- Contacts Column -->
  <div style="display: flex; flex-direction: column;">
    <h3 style="margin: 0 0 1rem 0;">Contacts (<%= @company.contacts.count %>)</h3>
    <% if @company.contacts.any? %>
      <div style="display: flex; flex-direction: column; gap: 10px;">
        <% @company.contacts.each do |contact| %>
          <div style="padding: 12px; border: 1px solid #ddd; border-radius: 4px; background-color: var(--bg-secondary, #f8f9fa); cursor: pointer; transition: all 0.2s ease; min-height: 100px; display: flex; flex-direction: column; justify-content: center;" onmouseover="this.style.backgroundColor='#e9ecef'" onmouseout="this.style.backgroundColor='var(--bg-secondary, #f8f9fa)'" onclick="window.location.href='<%= contact_path(contact) %>'">
            <div style="display: flex; justify-content: space-between; align-items: start;">
              <div style="flex: 1; min-width: 0;">
                <h4 style="margin: 0 0 5px 0;"><%= link_to contact.name, contact_path(contact), style: "color: #0d6efd; text-decoration: none;" %></h4>
                <% if contact.title.present? %>
                <p style="margin: 5px 0; font-size: 14px; color: #666;">
                  <strong>Title:</strong> <%= contact.title %>
                </p>
                <% end %>
                <% if contact.email.present? %>
                <p style="margin: 5px 0; font-size: 13px; color: #0d6efd; word-break: break-all;">
                  <%= link_to contact.email, "mailto:#{contact.email}", style: "color: #0d6efd; text-decoration: none;" %>
                </p>
                <% end %>
                <% if contact.phone.present? %>
                <p style="margin: 5px 0; font-size: 14px; color: #666;">
                  <%= link_to contact.phone, "tel:#{contact.phone}", style: "color: #0d6efd; text-decoration: none;" %>
                </p>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    <% else %>
      <div style="padding: 12px; border: 1px solid #ddd; border-radius: 4px; background-color: var(--bg-secondary, #f8f9fa); text-align: center; color: #666; min-height: 100px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
        <p>No contacts found</p>
        <%= link_to "Add contact", new_contact_path(company_id: @company.id), style: "color: #0d6efd; text-decoration: none;" %>
      </div>
    <% end %>
  </div>
</div>