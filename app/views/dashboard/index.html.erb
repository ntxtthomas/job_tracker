<% content_for :title, "Dashboard" %>

<h1>Job Tracker Dashboard</h1>

<div class="dashboard-cards" style="max-width: 400px;">
  <div class="card card-submitted">
    <div class="card-header">
      <h3>Applications Submitted</h3>
      <div class="card-icon">ðŸ“‹</div>
    </div>
    <div class="card-body">
      <div class="card-number"><%= @total_resumes %></div>
      <p class="card-subtitle">Total applications sent</p>
    </div>
  </div>
</div>

<% if @tech_stack_data.any? %>
  <div class="dashboard-cards" style="max-width: 800px; margin-top: 2rem;">
    <div class="card">
      <div class="card-header">
        <h3>Tech Stack Distribution</h3>
        <div class="card-icon">ðŸ“Š</div>
      </div>
      <div class="card-body">
        <div class="tech-stack-chart">
          <% max_count = @tech_stack_data.values.max %>
          <% @tech_stack_data.each do |tech_stack, count| %>
            <div class="chart-bar-container">
              <div class="chart-label"><%= tech_stack %></div>
              <div class="chart-bar-wrapper">
                <div class="chart-bar" style="width: <%= (count.to_f / max_count * 100).round(1) %>%;">
                  <span class="chart-count"><%= count %></span>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
<% end %>

<div class="dashboard-actions">
  <h2>Quick Actions</h2>
  <div class="action-buttons">
    <%= link_to "Add New Company", new_company_path, class: "btn btn-primary" %>
    <%= link_to "Create Opportunity", new_opportunity_path, class: "btn btn-secondary" %>
    <%= link_to "View All Applications", opportunities_path, class: "btn btn-secondary" %>
  </div>
</div>
